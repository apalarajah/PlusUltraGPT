{"ast":null,"code":"import hotEmitter from\"webpack/hot/emitter.js\";import{log}from\"./log.js\";function reloadApp(_ref,status){var hot=_ref.hot,liveReload=_ref.liveReload;if(status.isUnloading){return;}var currentHash=status.currentHash,previousHash=status.previousHash;var isInitial=currentHash.indexOf(previousHash)>=0;if(isInitial){return;}function applyReload(rootWindow,intervalId){clearInterval(intervalId);log.info(\"App updated. Reloading...\");rootWindow.location.reload();}var search=self.location.search.toLowerCase();var allowToHot=search.indexOf(\"webpack-dev-server-hot=false\")===-1;var allowToLiveReload=search.indexOf(\"webpack-dev-server-live-reload=false\")===-1;if(hot&&allowToHot){log.info(\"App hot update...\");hotEmitter.emit(\"webpackHotUpdate\",status.currentHash);if(typeof self!==\"undefined\"&&self.window){self.postMessage(\"webpackHotUpdate\".concat(status.currentHash),\"*\");}}else if(liveReload&&allowToLiveReload){var rootWindow=self;var intervalId=self.setInterval(function(){if(rootWindow.location.protocol!==\"about:\"){applyReload(rootWindow,intervalId);}else{rootWindow=rootWindow.parent;if(rootWindow.parent===rootWindow){applyReload(rootWindow,intervalId);}}});}}export default reloadApp;","map":{"version":3,"names":["hotEmitter","log","reloadApp","_ref","status","hot","liveReload","isUnloading","currentHash","previousHash","isInitial","indexOf","applyReload","rootWindow","intervalId","clearInterval","info","location","reload","search","self","toLowerCase","allowToHot","allowToLiveReload","emit","window","postMessage","concat","setInterval","protocol","parent"],"sources":["C:/Users/a_pal/AppData/Roaming/npm/node_modules/expo-cli/node_modules/webpack-dev-server/client/utils/reloadApp.js"],"sourcesContent":["import hotEmitter from \"webpack/hot/emitter.js\";\nimport { log } from \"./log.js\";\n\n/** @typedef {import(\"../index\").Options} Options\n/** @typedef {import(\"../index\").Status} Status\n\n/**\n * @param {Options} options\n * @param {Status} status\n */\nfunction reloadApp(_ref, status) {\n  var hot = _ref.hot,\n    liveReload = _ref.liveReload;\n  if (status.isUnloading) {\n    return;\n  }\n  var currentHash = status.currentHash,\n    previousHash = status.previousHash;\n  var isInitial = currentHash.indexOf( /** @type {string} */previousHash) >= 0;\n  if (isInitial) {\n    return;\n  }\n\n  /**\n   * @param {Window} rootWindow\n   * @param {number} intervalId\n   */\n  function applyReload(rootWindow, intervalId) {\n    clearInterval(intervalId);\n    log.info(\"App updated. Reloading...\");\n    rootWindow.location.reload();\n  }\n  var search = self.location.search.toLowerCase();\n  var allowToHot = search.indexOf(\"webpack-dev-server-hot=false\") === -1;\n  var allowToLiveReload = search.indexOf(\"webpack-dev-server-live-reload=false\") === -1;\n  if (hot && allowToHot) {\n    log.info(\"App hot update...\");\n    hotEmitter.emit(\"webpackHotUpdate\", status.currentHash);\n    if (typeof self !== \"undefined\" && self.window) {\n      // broadcast update to window\n      self.postMessage(\"webpackHotUpdate\".concat(status.currentHash), \"*\");\n    }\n  }\n  // allow refreshing the page only if liveReload isn't disabled\n  else if (liveReload && allowToLiveReload) {\n    var rootWindow = self;\n\n    // use parent window for reload (in case we're in an iframe with no valid src)\n    var intervalId = self.setInterval(function () {\n      if (rootWindow.location.protocol !== \"about:\") {\n        // reload immediately if protocol is valid\n        applyReload(rootWindow, intervalId);\n      } else {\n        rootWindow = rootWindow.parent;\n        if (rootWindow.parent === rootWindow) {\n          // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways\n          applyReload(rootWindow, intervalId);\n        }\n      }\n    });\n  }\n}\nexport default reloadApp;"],"mappings":"AAAA,MAAO,CAAAA,UAAU,KAAM,wBAAwB,CAC/C,OAASC,GAAG,gBASZ,QAAS,CAAAC,SAASA,CAACC,IAAI,CAAEC,MAAM,CAAE,CAC/B,GAAI,CAAAC,GAAG,CAAGF,IAAI,CAACE,GAAG,CAChBC,UAAU,CAAGH,IAAI,CAACG,UAAU,CAC9B,GAAIF,MAAM,CAACG,WAAW,CAAE,CACtB,OACF,CACA,GAAI,CAAAC,WAAW,CAAGJ,MAAM,CAACI,WAAW,CAClCC,YAAY,CAAGL,MAAM,CAACK,YAAY,CACpC,GAAI,CAAAC,SAAS,CAAGF,WAAW,CAACG,OAAO,CAAuBF,YAAY,CAAC,EAAI,CAAC,CAC5E,GAAIC,SAAS,CAAE,CACb,OACF,CAMA,QAAS,CAAAE,WAAWA,CAACC,UAAU,CAAEC,UAAU,CAAE,CAC3CC,aAAa,CAACD,UAAU,CAAC,CACzBb,GAAG,CAACe,IAAI,CAAC,2BAA2B,CAAC,CACrCH,UAAU,CAACI,QAAQ,CAACC,MAAM,CAAC,CAAC,CAC9B,CACA,GAAI,CAAAC,MAAM,CAAGC,IAAI,CAACH,QAAQ,CAACE,MAAM,CAACE,WAAW,CAAC,CAAC,CAC/C,GAAI,CAAAC,UAAU,CAAGH,MAAM,CAACR,OAAO,CAAC,8BAA8B,CAAC,GAAK,CAAC,CAAC,CACtE,GAAI,CAAAY,iBAAiB,CAAGJ,MAAM,CAACR,OAAO,CAAC,sCAAsC,CAAC,GAAK,CAAC,CAAC,CACrF,GAAIN,GAAG,EAAIiB,UAAU,CAAE,CACrBrB,GAAG,CAACe,IAAI,CAAC,mBAAmB,CAAC,CAC7BhB,UAAU,CAACwB,IAAI,CAAC,kBAAkB,CAAEpB,MAAM,CAACI,WAAW,CAAC,CACvD,GAAI,MAAO,CAAAY,IAAI,GAAK,WAAW,EAAIA,IAAI,CAACK,MAAM,CAAE,CAE9CL,IAAI,CAACM,WAAW,CAAC,kBAAkB,CAACC,MAAM,CAACvB,MAAM,CAACI,WAAW,CAAC,CAAE,GAAG,CAAC,CACtE,CACF,CAAC,IAEI,IAAIF,UAAU,EAAIiB,iBAAiB,CAAE,CACxC,GAAI,CAAAV,UAAU,CAAGO,IAAI,CAGrB,GAAI,CAAAN,UAAU,CAAGM,IAAI,CAACQ,WAAW,CAAC,UAAY,CAC5C,GAAIf,UAAU,CAACI,QAAQ,CAACY,QAAQ,GAAK,QAAQ,CAAE,CAE7CjB,WAAW,CAACC,UAAU,CAAEC,UAAU,CAAC,CACrC,CAAC,IAAM,CACLD,UAAU,CAAGA,UAAU,CAACiB,MAAM,CAC9B,GAAIjB,UAAU,CAACiB,MAAM,GAAKjB,UAAU,CAAE,CAEpCD,WAAW,CAACC,UAAU,CAAEC,UAAU,CAAC,CACrC,CACF,CACF,CAAC,CAAC,CACJ,CACF,CACA,cAAe,CAAAZ,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}