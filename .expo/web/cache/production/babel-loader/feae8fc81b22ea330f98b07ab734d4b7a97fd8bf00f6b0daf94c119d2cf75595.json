{"ast":null,"code":"import WebSocketClient from\"./clients/WebSocketClient.js\";import{log}from\"./utils/log.js\";var Client=typeof __webpack_dev_server_client__!==\"undefined\"?typeof __webpack_dev_server_client__.default!==\"undefined\"?__webpack_dev_server_client__.default:__webpack_dev_server_client__:WebSocketClient;var retries=0;var maxRetries=10;export var client=null;var socket=function initSocket(url,handlers,reconnect){client=new Client(url);client.onOpen(function(){retries=0;if(typeof reconnect!==\"undefined\"){maxRetries=reconnect;}});client.onClose(function(){if(retries===0){handlers.close();}client=null;if(retries<maxRetries){var retryInMs=1000*Math.pow(2,retries)+Math.random()*100;retries+=1;log.info(\"Trying to reconnect...\");setTimeout(function(){socket(url,handlers,reconnect);},retryInMs);}});client.onMessage(function(data){var message=JSON.parse(data);if(handlers[message.type]){handlers[message.type](message.data,message.params);}});};export default socket;","map":{"version":3,"names":["WebSocketClient","log","Client","__webpack_dev_server_client__","default","retries","maxRetries","client","socket","initSocket","url","handlers","reconnect","onOpen","onClose","close","retryInMs","Math","pow","random","info","setTimeout","onMessage","data","message","JSON","parse","type","params"],"sources":["C:/Users/a_pal/AppData/Roaming/npm/node_modules/expo-cli/node_modules/webpack-dev-server/client/socket.js"],"sourcesContent":["/* global __webpack_dev_server_client__ */\n\nimport WebSocketClient from \"./clients/WebSocketClient.js\";\nimport { log } from \"./utils/log.js\";\n\n// this WebsocketClient is here as a default fallback, in case the client is not injected\n/* eslint-disable camelcase */\nvar Client =\n// eslint-disable-next-line no-nested-ternary\ntypeof __webpack_dev_server_client__ !== \"undefined\" ? typeof __webpack_dev_server_client__.default !== \"undefined\" ? __webpack_dev_server_client__.default : __webpack_dev_server_client__ : WebSocketClient;\n/* eslint-enable camelcase */\n\nvar retries = 0;\nvar maxRetries = 10;\n\n// Initialized client is exported so external consumers can utilize the same instance\n// It is mutable to enforce singleton\n// eslint-disable-next-line import/no-mutable-exports\nexport var client = null;\n\n/**\n * @param {string} url\n * @param {{ [handler: string]: (data?: any, params?: any) => any }} handlers\n * @param {number} [reconnect]\n */\nvar socket = function initSocket(url, handlers, reconnect) {\n  client = new Client(url);\n  client.onOpen(function () {\n    retries = 0;\n    if (typeof reconnect !== \"undefined\") {\n      maxRetries = reconnect;\n    }\n  });\n  client.onClose(function () {\n    if (retries === 0) {\n      handlers.close();\n    }\n\n    // Try to reconnect.\n    client = null;\n\n    // After 10 retries stop trying, to prevent logspam.\n    if (retries < maxRetries) {\n      // Exponentially increase timeout to reconnect.\n      // Respectfully copied from the package `got`.\n      // eslint-disable-next-line no-restricted-properties\n      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;\n      retries += 1;\n      log.info(\"Trying to reconnect...\");\n      setTimeout(function () {\n        socket(url, handlers, reconnect);\n      }, retryInMs);\n    }\n  });\n  client.onMessage(\n  /**\n   * @param {any} data\n   */\n  function (data) {\n    var message = JSON.parse(data);\n    if (handlers[message.type]) {\n      handlers[message.type](message.data, message.params);\n    }\n  });\n};\nexport default socket;"],"mappings":"AAEA,MAAO,CAAAA,eAAe,oCACtB,OAASC,GAAG,sBAIZ,GAAI,CAAAC,MAAM,CAEV,MAAO,CAAAC,6BAA6B,GAAK,WAAW,CAAG,MAAO,CAAAA,6BAA6B,CAACC,OAAO,GAAK,WAAW,CAAGD,6BAA6B,CAACC,OAAO,CAAGD,6BAA6B,CAAGH,eAAe,CAG7M,GAAI,CAAAK,OAAO,CAAG,CAAC,CACf,GAAI,CAAAC,UAAU,CAAG,EAAE,CAKnB,MAAO,IAAI,CAAAC,MAAM,CAAG,IAAI,CAOxB,GAAI,CAAAC,MAAM,CAAG,QAAS,CAAAC,UAAUA,CAACC,GAAG,CAAEC,QAAQ,CAAEC,SAAS,CAAE,CACzDL,MAAM,CAAG,GAAI,CAAAL,MAAM,CAACQ,GAAG,CAAC,CACxBH,MAAM,CAACM,MAAM,CAAC,UAAY,CACxBR,OAAO,CAAG,CAAC,CACX,GAAI,MAAO,CAAAO,SAAS,GAAK,WAAW,CAAE,CACpCN,UAAU,CAAGM,SAAS,CACxB,CACF,CAAC,CAAC,CACFL,MAAM,CAACO,OAAO,CAAC,UAAY,CACzB,GAAIT,OAAO,GAAK,CAAC,CAAE,CACjBM,QAAQ,CAACI,KAAK,CAAC,CAAC,CAClB,CAGAR,MAAM,CAAG,IAAI,CAGb,GAAIF,OAAO,CAAGC,UAAU,CAAE,CAIxB,GAAI,CAAAU,SAAS,CAAG,IAAI,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAEb,OAAO,CAAC,CAAGY,IAAI,CAACE,MAAM,CAAC,CAAC,CAAG,GAAG,CACjEd,OAAO,EAAI,CAAC,CACZJ,GAAG,CAACmB,IAAI,CAAC,wBAAwB,CAAC,CAClCC,UAAU,CAAC,UAAY,CACrBb,MAAM,CAACE,GAAG,CAAEC,QAAQ,CAAEC,SAAS,CAAC,CAClC,CAAC,CAAEI,SAAS,CAAC,CACf,CACF,CAAC,CAAC,CACFT,MAAM,CAACe,SAAS,CAIhB,SAAUC,IAAI,CAAE,CACd,GAAI,CAAAC,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACH,IAAI,CAAC,CAC9B,GAAIZ,QAAQ,CAACa,OAAO,CAACG,IAAI,CAAC,CAAE,CAC1BhB,QAAQ,CAACa,OAAO,CAACG,IAAI,CAAC,CAACH,OAAO,CAACD,IAAI,CAAEC,OAAO,CAACI,MAAM,CAAC,CACtD,CACF,CAAC,CAAC,CACJ,CAAC,CACD,cAAe,CAAApB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}